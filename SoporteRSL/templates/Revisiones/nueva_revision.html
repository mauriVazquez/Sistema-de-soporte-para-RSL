{% extends '../base.html' %}
{% load static %}

{% block content %}   
    
<div class="w3-container">
  <h2>Nueva Revision</h2>
  <form action="/revisiones/nueva_revision" method="POST">
  {% csrf_token %}
  <div class="w3-row">
    <a href="javascript:void(0)" onclick="ControladorTab(event, 'MetaInformacion');">
      <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">Meta de informacion</div>
    </a>
    <a href="javascript:void(0)" onclick="ControladorTab(event, 'Preguntas');">
      <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">Preguntas de investigacion</div>
    </a>
    <a href="javascript:void(0)" onclick="ControladorTab(event, 'protocolo');">
      <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">Protocolo de Busqueda</div>
    </a>
    <a href="javascript:void(0)" onclick="ControladorTab(event, 'Criterios');">
      <div class="w3-quarter tablink w3-bottombar w3-hover-light-grey w3-padding">Criterios</div>
    </a>
  </div>


  <div id="MetaInformacion" class="w3-container city" style="display:none">
    <p>
      <label for="id_titulo">Titulo:</label>
      {{ revision_form.titulo }}
    </p>
    <p>
      <label for="id_meta_de_necesidad_de_informacion">Meta de necesidad de informacion:</label>
      {{ revision_form.meta_de_necesidad_de_informacion }}
    </p>
    <p>
      <label for="id_investigadores">Investigadores participantes:</label>
      {{ revision_form.investigadores }}
    </p>
  </div>


  <div id="Preguntas" class="w3-container w3-padding-16 city" style="display:none">
    <h4>Preguntas de investigacion</h4>
      {{ preguntas_formset.management_form }}
    <div class="w3-row " id="preguntas_formset">
      <div id="nuevas_preguntas">
      </div>
      <div class="w3-col w3-margin-bottom" style="width:94%">
        {% for preguntas_form in preguntas_formset %}
          {{ preguntas_form.pregunta }}
        {% endfor %}
      </div>
      <div class="w3-col" style="width:6%">
        <button class="w3-button w3-circle w3-green w3-right" id="add">+</button>
      </div>
    </div>
  </div>


  <div id="protocolo" class="w3-container city" style="display:none">
    <p>
      <label for="id_cadena_de_busqueda">Cadena de busqueda:</label>
      {{ revision_form.cadena_de_busqueda }}
    </p>
    <p>
      <label for="id_metadatos">Metadatos:</label>
      {{ revision_form.metadatos }}
    </p>
    <p>
      <label for="id_bibliotecas">bibliotecas:</label>
      {{ revision_form.bibliotecas }}
    </p>
  </div>


  <div id="Criterios" class="w3-container city" style="display:none">
    <h4>Incluir criterio:</h4>
    {{ criterio_formset.management_form }}
      <div class="w3-container w3-margin-bottom"> 
        <div id="nuevos_criterios" style="display:none">
      </div>
        {% for criterio_form in criterio_formset %}
          {{ criterio_form }}
        {% endfor %}
        <button class="w3-button w3-hover-green w3-right w3-margin-top w3-grey" id="insertar_criterio">Insertar criterio</button>
      </div>
    <h4>Criterios</h4>
      <div class="w3-container w3-margin-bottom">
        <table class="w3-table w3-striped w3-border tablesorter" id="tabla_criterios">
        <thead>
        <tr>
            <th>Descripcion</th>
            <th>Tipo</th>
            <th></th>
        </tr>
        </thead>
        <tbody id="body_criterios">
        </tbody>
        </table>
      </div>
  </div>

  
    <input class="w3-hover-green" type="submit" value="Guardar">
  </form>
</div>

<div id="criterio_empty_form" style="display:none">
        {{ criterio_formset.empty_form }}
</div>

<div id="empty_form" style="display:none">
  <div>
  <div class="w3-col w3-margin-bottom" style="width:94%">
        {{ preguntas_formset.empty_form.pregunta }}
  </div>
  <div class="w3-col" style="width:6%">
        <button class="w3-button w3-circle w3-red w3-right remove">-</button>
  </div>
  </div>
</div>

<script src="{% static 'revisiones/js/nueva_revision.js' %}"></script>
{% endblock %}